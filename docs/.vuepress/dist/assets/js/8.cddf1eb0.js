(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{440:function(e,a,t){e.exports=t.p+"assets/img/1.3964406c.png"},441:function(e,a,t){e.exports=t.p+"assets/img/2.60de2a3b.png"},442:function(e,a,t){e.exports=t.p+"assets/img/3.2bbd12a9.png"},484:function(e,a,t){"use strict";t.r(a);var n=t(65),r=Object(n.a)({},(function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h2",{attrs:{id:"_1-概述"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-概述"}},[e._v("#")]),e._v(" 1. 概述")]),e._v(" "),n("p",[e._v("本指南介绍BSC TEST（币安测试链）和 TIE链之间的跨链交易实施")]),e._v(" "),n("h2",{attrs:{id:"_2-工具和环境要求"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-工具和环境要求"}},[e._v("#")]),e._v(" 2. 工具和环境要求")]),e._v(" "),n("p",[e._v("​      环境：")]),e._v(" "),n("ul",[n("li",[n("p",[e._v("Go: >= 1.16")])]),e._v(" "),n("li",[n("p",[e._v("Node.js >= 16.13.0")])]),e._v(" "),n("li",[n("p",[e._v("Git")]),e._v(" "),n("p",[e._v("工具：")]),e._v(" "),n("ul",[n("li",[n("p",[n("a",{attrs:{href:"https://github.com/ChainSafe/ChainBridge",target:"_blank",rel:"noopener noreferrer"}},[e._v("ChainBridge"),n("OutboundLink")],1),e._v(": v1.1.5")])]),e._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://github.com/ChainSafe/chainbridge-deploy",target:"_blank",rel:"noopener noreferrer"}},[e._v("ChainBridge Deploy Tools"),n("OutboundLink")],1),e._v(": "),n("code",[e._v("f2aa093")]),e._v(" on "),n("code",[e._v("main")]),e._v(" branch")])])])])]),e._v(" "),n("h2",{attrs:{id:"_3-跨链合约部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-跨链合约部署"}},[e._v("#")]),e._v(" 3. 跨链合约部署")]),e._v(" "),n("h3",{attrs:{id:"_3-1-部署脚本下载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-部署脚本下载"}},[e._v("#")]),e._v(" 3.1 部署脚本下载：")]),e._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[e._v("\n$ git clone https"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("github"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("com"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("ChainSafe"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("chainbridge"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("deploy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("git\n$ cd chainbridge"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("deploy"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("cb"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("sol"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("cli\n$ make install\n\n")])])]),n("h3",{attrs:{id:"_3-2-部署跨链合约到bsc"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-部署跨链合约到bsc"}},[e._v("#")]),e._v(" 3.2 部署跨链合约到BSC")]),e._v(" "),n("p",[e._v("我们将通过命令将合约部署到 BSC TEST 链。该命令部署所有合约，包括 Bridge、ERC20 Handler、ERC721 Handler、Generic Handler、ERC20 和 ERC721 合约。此外，它还会设置默认的中继帐户地址和阈值。")]),e._v(" "),n("p",[e._v("执行示范：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("$ cb-sol-cli deploy --all --chainId 99 \n  --url https://rpc-mumbai.matic.today \n  --privateKey [ADMIN_ACCOUNT_PRIVATE_KEY] \n  --relayers [RELAYER_ACCOUNT_ADDRESS] \n  --relayerThreshold 1 \n")])])]),n("p",[e._v("执行实例：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v(" cb-sol-cli deploy --all --chainId 97 \n --url  https://data-seed-prebsc-2-s1.binance.org:8545\n --privateKey 64a69c87b3d15dc1xxxxxxxxxxxxxxxxxxxxxx\n --relayers 0xAFC312512B8787848D75490377b093B1F7CF3033\n --relayerThreshold 1 \n --gasPrice 10000000000\n \nUrl:        https://data-seed-prebsc-2-s1.binance.org:8545\nDeployer:   0xAFC312512B8787848D75490377b093B1F7CF3033\nGas Limit:   8000000\nGas Price:   10000000000\nDeploy Cost: 0.14532642\n\nOptions\n=======\nChain Id:    97\nThreshold:   1\nRelayers:    0xAFC312512B8787848D75490377b093B1F7CF3033\nBridge Fee:  0\nExpiry:      100\n\nContract Addresses\n================================================================\nBridge:             0xa5B27BdCb8af3d062e63C02b31Ee9E8763e9636B\n----------------------------------------------------------------\nErc20 Handler:      0xE52482077205e0205a9B25b6f043B812A5c81f0e\n----------------------------------------------------------------\nErc721 Handler:     0xFa4Ee64074b799a9Ee7951c0fDfb2F7b0dDcB6F6\n----------------------------------------------------------------\nGeneric Handler:    0x48422E521f9063291c2f140a7Cec274C3c008Db4\n----------------------------------------------------------------\nErc20:              0x52Ad3084a9Ad4152E52FdEAb8644a05E9Eb1E006\n----------------------------------------------------------------\nErc721:             0xed94f9e20416531cBcb5A68F81D746D0F8Da6eec\n----------------------------------------------------------------\nCentrifuge Asset:   Not Deployed\n----------------------------------------------------------------\nWETC:               Not Deployed\n================================================================\n")])])]),n("h3",{attrs:{id:"_3-3-部署跨链合约到tie"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-部署跨链合约到tie"}},[e._v("#")]),e._v(" 3.3 部署跨链合约到TIE")]),e._v(" "),n("p",[e._v("再将通过命令将合约部署到 TIE 链 ，步骤同上")]),e._v(" "),n("p",[e._v("执行示范：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("$ cb-sol-cli deploy --all --chainId 100 \n  --url http://localhost:10002 \n  --privateKey [ADMIN_ACCOUNT_PRIVATE_KEY] \n  --relayers [RELAYER_ACCOUNT_ADDRESS] \n  --relayerThreshold 1\n")])])]),n("h2",{attrs:{id:"_4-中继配置和启动监听"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-中继配置和启动监听"}},[e._v("#")]),e._v(" 4. 中继配置和启动监听")]),e._v(" "),n("h3",{attrs:{id:"_4-1-中继器下载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-中继器下载"}},[e._v("#")]),e._v(" 4.1 中继器下载")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("$ git clone https://github.com/ChainSafe/ChainBridge.git\n$ cd chainBridge && make install\n")])])]),n("h3",{attrs:{id:"_4-2-监听配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-监听配置"}},[e._v("#")]),e._v(" 4.2 监听配置")]),e._v(" "),n("p",[e._v("接下来，您需要"),n("code",[e._v("config.json")]),e._v("为每条链创建和设置 JSON-RPC URL、中继器地址和合约地址。")]),e._v(" "),n("p",[e._v("执行示范：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('\n  "chains": [\n    {\n      "name": "bsc test",\n      "type": "ethereum",\n      "id": "97",\n      "endpoint": "https://data-seed-prebsc-2-s1.binance.org:8545",\n      "from": "<RELAYER_ACCOUNT_ADDRESS>",\n      "opts": {\n        "bridge": "<BRIDGE_CONTRACT_ADDRESS>",\n        "erc20Handler": "<ERC20_HANDLER_CONTRACT_ADDRESS>",\n        "erc721Handler": "<ERC721_HANDLER_CONTRACT_ADDRESS>",\n        "genericHandler": "<GENERIC_HANDLER_CONTRACT_ADDRESS>",\n        "minGasPrice": "1",\n        "http": "true"\n      }\n    },\n    {\n      "name": "tie",\n      "type": "ethereum",\n      "id": "166",\n      "endpoint": "http://localhost:10002",\n      "from": "<RELAYER_ACCOUNT_ADDRESS>",\n      "opts": {\n        "bridge": "<BRIDGE_CONTRACT_ADDRESS>",\n        "erc20Handler": "<ERC20_HANDLER_CONTRACT_ADDRESS>",\n        "erc721Handler": "<ERC721_HANDLER_CONTRACT_ADDRESS>",\n        "genericHandler": "<GENERIC_HANDLER_CONTRACT_ADDRESS>",\n        "minGasPrice": "1",\n        "http": "true"\n      }\n    }\n  ]\n}\n')])])]),n("h3",{attrs:{id:"_4-3-倒入私钥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-倒入私钥"}},[e._v("#")]),e._v(" 4.3 倒入私钥")]),e._v(" "),n("p",[e._v("启动relayer需要导入relayer账户地址对应的私钥。导入私钥时需要输入密码。导入成功后，密钥将存储在"),n("code",[e._v("keys/<ADDRESS>.key")]),e._v(".")]),e._v(" "),n("p",[e._v("执行示范：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("$ chainbridge accounts import --privateKey [RELAYER_ACCOUNT_PRIVATE_KEY]\n\nINFO[11-19|07:09:01] Importing key... \nEnter password to encrypt keystore file:\n> [PASSWORD_TO_ENCRYPT_KEY]\nINFO[11-19|07:09:05] private key imported    \n")])])]),n("h3",{attrs:{id:"_4-4-启动监听者"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-启动监听者"}},[e._v("#")]),e._v(" 4.4 启动监听者")]),e._v(" "),n("p",[e._v("一旦监听者开始，它将开始观察每条链中的新块。")]),e._v(" "),n("p",[e._v("执行示范：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("chainbridge --config config.json --latest\n\nINFO[11-19|07:15:19] Starting ChainBridge... \nEnter password for key ./keys/<RELAYER_ACCOUNT_ADDRESS>.key:\n> [PASSWORD_TO_DECRYPT_KEY]\nINFO[11-19|07:15:25] Connecting to ethereum chain...          chain=mumbai url=<JSON_RPC_URL>\nEnter password for key ./keys/<RELAYER_ACCOUNT_ADDRESS>.key:\n> [PASSWORD_TO_DECRYPT_KEY]\nINFO[11-19|07:15:31] Connecting to ethereum chain...          chain=tie url=<JSON_RPC_URL>\n")])])]),n("p",[e._v("执行实例：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("cuiyang@bogon ChainBridge % ./build/chainbridge --config config.json --latest\nINFO[04-08|10:51:26] Starting ChainBridge... \nEnter password for key ./keys/0xAFC312512B8787848D75490377b093B1F7CF3033.key:\n> \nINFO[04-08|10:51:28] Connecting to ethereum chain...          chain=bsc url=https://data-seed-prebsc-2-s1.binance.org:8545\nEnter password for key ./keys/0xAFC312512B8787848D75490377b093B1F7CF3033.key:\n> \nINFO[04-08|10:51:33] Connecting to ethereum chain...          chain=tie url=http://192.168.1.132:8545\nINFO[04-08|10:51:33] Started bsc chain                        system=core\nINFO[04-08|10:51:33] Polling Blocks...                        chain=bsc block=18259742\nINFO[04-08|10:51:33] Polling Blocks...                        chain=tie block=14947\nINFO[04-08|10:51:33] Started ptie chain               system=core\nINFO[04-08|13:19:22] Handling fungible deposit event          chain=tie dest=100 nonce=1\nINFO[04-08|13:19:22] Attempting to resolve message            chain=tie type=FungibleTransfer src=100 dst=100 nonce=1 rId=000000000000000000000000000000c76ebe4a02bbc34786d860b355f5a5ce00\nINFO[04-08|13:19:22] Creating erc20 proposal                  chain=tie src=100 nonce=1\nINFO[04-08|13:19:22] Watching for finalization event          chain=tie src=100 nonce=1\nINFO[04-08|13:19:22] Submitted proposal vote                  chain=tie tx=0x43bfdaa2a313ee6f420a5f91ca1d4b0030a6046aa0bc27729965e67036e5c62e src=100 depositNonce=1 gasPrice=1391\nINFO[04-08|13:19:47] Submitted proposal execution             chain=tie tx=0xed53d30ca3d2240aa7ac95e2141791209621ff48fbf34ef992224743856a28e6 src=100 dst=100 nonce=1 gasPrice=1417\nINFO[04-08|13:46:52] Handling fungible deposit event          chain=tie dest=97 nonce=1\nINFO[04-08|13:46:52] Attempting to resolve message            chain=bsc type=FungibleTransfer src=100 dst=97 nonce=1 rId=000000000000000000000000000000c76ebe4a02bbc34786d860b355f5a5ce00\nINFO[04-08|13:46:52] Creating erc20 proposal                  chain=bsc src=100 nonce=1\nINFO[04-08|13:46:52] Watching for finalization event          chain=bsc src=100 nonce=1\nINFO[04-08|13:46:52] Submitted proposal vote                  chain=bsc tx=0x205f61f6b1051ac84399acb211def61d2db76468a39139e8bb958bc4e2b72d3d src=100 depositNonce=1 gasPrice=10000000000\n")])])]),n("h3",{attrs:{id:"_4-5-整体合约和监听者架构图"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-整体合约和监听者架构图"}},[e._v("#")]),e._v(" 4.5 整体合约和监听者架构图")]),e._v(" "),n("p",[n("img",{attrs:{src:t(440),alt:"image-20220516123553346"}})]),e._v(" "),n("h2",{attrs:{id:"_5-erc20-跨链转账"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-erc20-跨链转账"}},[e._v("#")]),e._v(" 5. ERC20 跨链转账")]),e._v(" "),n("h3",{attrs:{id:"_5-1-注册资源id"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-注册资源id"}},[e._v("#")]),e._v(" 5.1 注册资源ID")]),e._v(" "),n("p",[e._v("您将在跨链环境中注册一个关联资源的资源 ID。资源 ID 是一个 32 字节的值，对于我们在这些区块链之间传输的资源必须是唯一的。资源 ID 是任意的，但它们可能在最后一个字节中具有主链的链 ID，作为约定（主链指的是这些资源源自的网络）。")]),e._v(" "),n("p",[e._v("执行示范：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('$ cb-sol-cli bridge register-resource \\\n  --url https://rpc-mumbai.matic.today \\\n  --privateKey [ADMIN_ACCOUNT_PRIVATE_KEY] \\\n  # Set Resource ID for ERC20\n  --resourceId "0x000000000000000000000000000000c76ebe4a02bbc34786d860b355f5a5ce00" \\\n  --bridge "[BRIDGE_CONTRACT_ADDRESS]" \\\n  --handler "[ERC20_HANDLER_CONTRACT_ADDRESS]" \\\n  --targetContract "[ERC20_CONTRACT_ADDRESS]"\n\n# For tie chain\n$ cb-sol-cli bridge register-resource \\\n  --url http://localhost:10002 \\\n  --privateKey [ADMIN_ACCOUNT_PRIVATE_KEY] \\\n  # Set Resource ID for ERC20\n  --resourceId "0x000000000000000000000000000000c76ebe4a02bbc34786d860b355f5a5ce00" \\\n  --bridge "[BRIDGE_CONTRACT_ADDRESS]" \\\n  --handler "[ERC20_HANDLER_CONTRACT_ADDRESS]" \\\n  --targetContract "[ERC20_CONTRACT_ADDRESS]"\n')])])]),n("p",[e._v("执行实例：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('cb-sol-cli bridge register-resource   \n--url  https://data-seed-prebsc-2-s1.binance.org:8545 --privateKey 64a69c87b3d15dc1XXXXXXXXXXXXXXXXXXXX\n--resourceId "0x000000000000000000000000000000c76ebe4a02bbc34786d860b355f5a5ce00" \n--bridge  0xa5B27BdCb8af3d062e63C02b31Ee9E8763e9636B  \n--handler  0xE52482077205e0205a9B25b6f043B812A5c81f0e \n--targetContract 0x52Ad3084a9Ad4152E52FdEAb8644a05E9Eb1E006 \n--gasPrice 10000000000\n\n[bridge/register-resource] Registering contract 0x52Ad3084a9Ad4152E52FdEAb8644a05E9Eb1E006 with resource ID 0x000000000000000000000000000000c76ebe4a02bbc34786d860b355f5a5ce00 on handler 0xE52482077205e0205a9B25b6f043B812A5c81f0e\nWaiting for tx: 0xddb98e63e35b2b0da5abd8c1d9a0ca3b93cb0ec436402e859e2f072d559323a1...\n\n')])])]),n("h3",{attrs:{id:"_5-2-添加代币使用模式-可选"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-添加代币使用模式-可选"}},[e._v("#")]),e._v(" 5.2 添加代币使用模式（可选）")]),e._v(" "),n("p",[e._v("在链间转移 ERC20 代币时，代币可以有两种不同的处理方式：")]),e._v(" "),n("p",[e._v("(1)  Lock/Release mode")]),e._v(" "),n("p",[n("strong",[e._v("源链")]),e._v("：您发送的代币将被锁定在 ERC20 处理程序合约\n"),n("strong",[e._v("目标链")]),e._v("中：与您在源链中发送的相同数量的代币将被解锁并从 ERC20 处理程序合约转移到目标链中的接收账户。")]),e._v(" "),n("p",[e._v("(2) Burn/Mint mode")]),e._v(" "),n("p",[n("strong",[e._v("源链")]),e._v("：您发送的代币将被烧毁\n"),n("strong",[e._v("目标链")]),e._v("：与您在源链上发送和烧毁的代币数量相同，将在目标链上铸造并发送到收件人帐户。")]),e._v(" "),n("p",[e._v("您可以在每个链中使用不同的模式。这意味着您可以在主链中锁定一个 ERC20 代币，同时在子链中铸造一个 ERC20 代币进行转移。例如，如果控制了总供应量或铸币计划，则锁定/释放代币可能是有意义的。如果子链中的合约必须遵循主链中的供应，代币将被铸造/销毁。")]),e._v(" "),n("p",[e._v("默认模式是"),n("strong",[e._v("锁定/释放")]),e._v("模式。如果你想让代币可铸造/可燃烧，你需要调用"),n("code",[e._v("adminSetBurnable")]),e._v("方法。如果您想在执行时铸造代币，您需要将"),n("code",[e._v("minter")]),e._v("角色授予 ERC20 处理程序合约")]),e._v(" "),n("p",[e._v("执行示范：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('# Let ERC20 contract burn on source chain and mint on destination chain\n$ cb-sol-cli bridge set-burn \n  --url http://localhost:10002 \n  --privateKey [ADMIN_ACCOUNT_PRIVATE_KEY] \n  --bridge "[BRIDGE_CONTRACT_ADDRESS]" \n  --handler "[ERC20_HANDLER_CONTRACT_ADDRESS]" \n  --tokenContract "[ERC20_CONTRACT_ADDRESS]"\n\n# Grant minter role to ERC20 Handler contract\n$ cb-sol-cli erc20 add-minter \n  --url http://localhost:10002 \n  --privateKey [ADMIN_ACCOUNT_PRIVATE_KEY] \n  --erc20Address "[ERC20_CONTRACT_ADDRESS]" \n  --minter "[ERC20_HANDLER_CONTRACT_ADDRESS]"\n')])])]),n("h3",{attrs:{id:"_5-3-跨链转账"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-跨链转账"}},[e._v("#")]),e._v(" 5.3 跨链转账")]),e._v(" "),n("p",[e._v("我们会将 ERC20 代币从TIE  链发送到 BSC 链。")]),e._v(" "),n("p",[e._v("首先，您将通过铸造获得代币。具有该"),n("code",[e._v("minter")]),e._v("角色的帐户可以铸造新令牌。已部署 ERC20 合约的账户"),n("code",[e._v("minter")]),e._v("默认拥有该角色。要将其他帐户指定为"),n("code",[e._v("minter")]),e._v("角色的成员，您需要运行该"),n("code",[e._v("cb-sol-cli erc20 add-minter")]),e._v("命令")]),e._v(" "),n("p",[e._v("执行示范：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('# Mint ERC20 tokens\n$ cb-sol-cli erc20 mint \n  --url https://rpc-mumbai.matic.today \n  --privateKey [MINTER_ACCOUNT_PRIVATE_KEY] \n  --erc20Address "[ERC20_CONTRACT_ADDRESS]" \n  --amount 1000\n  \n  # Approve transfer from the account by ERC20 Handler\n  # 接下来，您需要通过 ERC20 Handler 批准从账户转移 ERC20 代币\n$ cb-sol-cli erc20 approve \n  --url https://rpc-mumbai.matic.today \n  --privateKey [USER_ACCOUNT_ADDRESS] \n  --erc20Address "[ERC20_CONTRACT_ADDRESS]" \n  --recipient "[ERC20_HANDLER_CONTRACT_ADDRESS]" \n  --amount 500\n  \n  \n  # Start transfer from tie  to BSC chain\n   # 要将代币转移到 BSC 链，您将调用deposit\n$ cb-sol-cli erc20 deposit \\\n  --url https://rpc-mumbai.matic.today \\\n  --privateKey [PRIVATE_KEY] \\\n  --amount 10 \\\n  # ChainID of tie chain\n  --dest 100 \\\n  --bridge "[BRIDGE_CONTRACT_ADDRESS]" \\\n  --recipient "[RECIPIENT_ADDRESS_IN_TIE_CHAIN]" \\\n  --resourceId "0x000000000000000000000000000000c76ebe4a02bbc34786d860b355f5a5ce00"\n')])])]),n("p",[e._v("执行实例：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('cb-sol-cli erc20 mint \n--url http://192.168.1.132:8545 \n--privateKey 64a69c87b3d15dc1f03XXXXXXXXXXXXXXXXXXXXXXXX \n--erc20Address 0x10D95320F84e96eDd3C69347Ebcf83a6B7fae0cb \n--amount 1000\n\n[erc20/mint] Minting 1000 tokens to 0xAFC312512B8787848D75490377b093B1F7CF3033 on contract 0x10D95320F84e96eDd3C69347Ebcf83a6B7fae0cb\nWaiting for tx: 0x676ca8505f93a7266e266212783cd643161101f682f939ef43d3a4dc21e7bf3b...\n\n\ncb-sol-cli erc20 approve  \n--url http://192.168.1.132:8545  \n--privateKey 64a69c87b3d15dc1XXXXXXXXXXXXXXXXXXXXXXXX\n--erc20Address 0x10D95320F84e96eDd3C69347Ebcf83a6B7fae0cb\n--recipient 0x18ace2Bc228ffF3459e06646a10bb40c3420E07A \n--amount 500\n\n[erc20/approve] Approving 0x18ace2Bc228ffF3459e06646a10bb40c3420E07A to spend 500 tokens from 0xAFC312512B8787848D75490377b093B1F7CF3033!\nWaiting for tx: 0xe78841a61ceca9714ef830e2e4f05296b92370884045155e2b3e21f7ef556be3...\n\n\ncb-sol-cli erc20 deposit \n--url  http://192.168.1.132:8545 \n--privateKey 64a69c87b3d15dc1fXXXXXXXXXXXXXXXXXXXXXXX\n--amount 10  \n--dest 97\n--bridge 0x75332FD24A14EB201f7c635f885b30D3F8B118F8 \n--recipient 0xAFC312512B8787848D75490377b093B1F7CF3033  \n--resourceId "0x000000000000000000000000000000c76ebe4a02bbc34786d860b355f5a5ce00"\n\n\n[erc20/deposit] Constructed deposit:\n[erc20/deposit]   Resource Id: 0x000000000000000000000000000000c76ebe4a02bbc34786d860b355f5a5ce00\n[erc20/deposit]   Amount: 0x8ac7230489e80000\n[erc20/deposit]   len(recipient): 20\n[erc20/deposit]   Recipient: 0xAFC312512B8787848D75490377b093B1F7CF3033\n[erc20/deposit]   Raw: 0x0000000000000000000000000000000000000000000000008ac7230489e800000000000000000000000000000000000000000000000000000000000000000014AFC312512B8787848D75490377b093B1F7CF3033\n[erc20/deposit] Creating deposit to initiate transfer!\nWaiting for tx: 0x418bfc456dc14161425ec30cb37b56575a254191dd88f4a61bcacdc149a6681c...\n')])])]),n("h3",{attrs:{id:"_5-3-中继器监听交易并且发送交易"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-中继器监听交易并且发送交易"}},[e._v("#")]),e._v(" 5.3 中继器监听交易并且发送交易")]),e._v(" "),n("p",[e._v("存款交易成功后，relayer 将获得该事件并对提案进行投票。在提交所需数量的投票后，它会执行交易以将代币发送到 TIE链中的收件人帐户。")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("INFO[11-19|08:15:58] Handling fungible deposit event          chain=mumbai dest=100 nonce=1\nINFO[11-19|08:15:59] Attempting to resolve message            chain=tie type=FungibleTransfer src=99 dst=100 nonce=1 rId=000000000000000000000000000000c76ebe4a02bbc34786d860b355f5a5ce00\nINFO[11-19|08:15:59] Creating erc20 proposal                  chain=tie src=99 nonce=1\nINFO[11-19|08:15:59] Watching for finalization event          chain=tie src=99 nonce=1\nINFO[11-19|08:15:59] Submitted proposal vote                  chain=tie tx=0x67a97849951cdf0480e24a95f59adc65ae75da23d00b4ab22e917a2ad2fa940d src=99 depositNonce=1 gasPrice=1\nINFO[11-19|08:16:24] Submitted proposal execution             chain=tie tx=0x63615a775a55fcb00676a40e3c9025eeefec94d0c32ee14548891b71f8d1aad1 src=99 dst=100 nonce=1 gasPrice=5\n\n")])])]),n("h3",{attrs:{id:"_5-4-查看跨链交易结果"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-查看跨链交易结果"}},[e._v("#")]),e._v(" 5.4 查看跨链交易结果")]),e._v(" "),n("p",[e._v("一旦执行交易成功，您将在 BSC 链中获得代币。")]),e._v(" "),n("p",[e._v("执行示范：")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('$ cb-sol-cli erc20 balance \n  --url https://localhost:10002 \n  --privateKey [PRIVATE_KEY] \n  --erc20Address "[ERC20_CONTRACT_ADDRESS]" \n  --address "[ACCOUNT_ADDRESS]"\n\n')])])]),n("p",[e._v("执行实例：")]),e._v(" "),n("p",[e._v("TIE 发出跨链交易减少10 ，BSC TEST链 收到10")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("cb-sol-cli erc20 balance \n--url http://192.168.1.132:8545 \n--privateKey 64a69c87b3d15dc1f03715493XXXXXXXXXXXXXXXXXX \n--erc20Address 0x10D95320F84e96eDd3C69347Ebcf83a6B7fae0cb  \n--address 0xAFC312512B8787848D75490377b093B1F7CF3033\n[erc20/balance] Account 0xAFC312512B8787848D75490377b093B1F7CF3033 has a balance of 990.0\n\ncb-sol-cli erc20 balance \n--url https://data-seed-prebsc-2-s1.binance.org:8545 \n--privateKey 64a69c87b3d15dc1f03715493XXXXXXXXXXXXXXXXXX \n--erc20Address 0x52Ad3084a9Ad4152E52FdEAb8644a05E9Eb1E006 \n--address 0xAFC312512B8787848D75490377b093B1F7CF3033\n[erc20/balance] Account 0xAFC312512B8787848D75490377b093B1F7CF3033 has a balance of 10.0\n\n\n\n")])])]),n("h3",{attrs:{id:"_5-5-跨链转帐和接受合约函数调用图"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-跨链转帐和接受合约函数调用图"}},[e._v("#")]),e._v(" 5.5 跨链转帐和接受合约函数调用图")]),e._v(" "),n("p",[n("img",{attrs:{src:t(441),alt:"bridge交易函数调用流程"}})]),e._v(" "),n("p",[e._v("​                                                                        A链发送跨链合约到监听器的函数过程")]),e._v(" "),n("p",[n("img",{attrs:{src:t(442),alt:"image-20220516124304639"}})]),e._v(" "),n("p",[e._v("​\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t监听者发送到B链的函数调用过程")]),e._v(" "),n("h2",{attrs:{id:"_6-erc721-跨链转账"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-erc721-跨链转账"}},[e._v("#")]),e._v(" 6. ERC721 跨链转账")]),e._v(" "),n("h3",{attrs:{id:"_6-1-生成erc721非同质化代币"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-生成erc721非同质化代币"}},[e._v("#")]),e._v(" 6.1 生成erc721非同质化代币")]),e._v(" "),n("p",[e._v("首先通过erc721合约生成非同质化代币，现在已经有一个属于您的id为0x50的代币。")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v(" cb-sol-cli erc721 mint \n --url https://data-seed-prebsc-2-s1.binance.org:8545 \n --privateKey 64a69c87b3d15dc1f03715493b7XXXXXXXXXXXXXXXX\n --erc721Address 0xed94f9e20416531cBcb5A68F81D746D0F8Da6eec --id 0x50 \n --gasPrice 10000000000\nWARNING: Multiple definitions for safeTransferFrom\n[erc721/mint] Minting token with id 0x50 to 0xAFC312512B8787848D75490377b093B1F7CF3033 on contract 0xed94f9e20416531cBcb5A68F81D746D0F8Da6eec!\n\n\ncb-sol-cli erc721 owner \n--url  https://data-seed-prebsc-2-s1.binance.org:8545 \n--privateKey 64a69c87b3d15dc1f0371549XXXXXXXXXXXXXXXX\n--erc721Address 0xed94f9e20416531cBcb5A68F81D746D0F8Da6eec \n--id 0x50 \n--gasPrice 10000000000\n\n\n[erc721/owner] Owner of token 0x50 is 0xAFC312512B8787848D75490377b093B1F7CF3033\n")])])]),n("h3",{attrs:{id:"_6-2-非同质化代币可以被合约调用和转账"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-非同质化代币可以被合约调用和转账"}},[e._v("#")]),e._v(" 6.2 非同质化代币可以被合约调用和转账")]),e._v(" "),n("p",[e._v("首先我们要同意合约可以调用我们的代币（因为是非同质化的代币所以approve一定精确到id）")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("cb-sol-cli erc721 approve\n--url https://data-seed-prebsc-2-s1.binance.org:8545\n--privateKey 64a69c87b3d15dc1f037XXXXXXXXXXXXXXXXXXXXX \n--erc721Address 0xed94f9e20416531cBcb5A68F81D746D0F8Da6eec \n--recipient 0xFa4Ee64074b799a9Ee7951c0fDfb2F7b0dDcB6F6 \n--id 0x50 --gasPrice 10000000000\n\n\n[erc721/approve] Approving 0xFa4Ee64074b799a9Ee7951c0fDfb2F7b0dDcB6F6 to spend token 0x50 from 0xAFC312512B8787848D75490377b093B1F7CF3033 on contract 0xed94f9e20416531cBcb5A68F81D746D0F8Da6eec!\n")])])]),n("h3",{attrs:{id:"_6-3-进行非同质化代币跨链转账"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-进行非同质化代币跨链转账"}},[e._v("#")]),e._v(" 6.3 进行非同质化代币跨链转账")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('cb-sol-cli erc721 deposit \n--url https://data-seed-prebsc-2-s1.binance.org:8545\n--privateKey 64a69c87b3d15dc1f0XXXXXXXXXXXXXXXXXXXXXXXXXXXX \n--bridge 0x92cf2A9a8e7F8a2FF2889D33D98992ef3bc1226f\n--resourceId "0x000000000000000000000000000000e389d61c11e5fe32ec1735b3cd38c69501" \n--id 0x50 \n--dest 200 \n--recipient 0xAFC312512B8787848D75490377b093B1F7CF3033 \n--gasPrice 10000000000 \n\n[erc721/deposit] Constructed deposit:\n[erc721/deposit]   Resource Id: 0x000000000000000000000000000000e389d61c11e5fe32ec1735b3cd38c69501\n[erc721/deposit]   Token Id: 0x50\n[erc721/deposit]   len(recipient): 20\n[erc721/deposit]   Recipient: 0xAFC312512B8787848D75490377b093B1F7CF3033\n[erc721/deposit]   Raw: 0x00000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000014AFC312512B8787848D75490377b093B1F7CF3033\n\n')])])]),n("h3",{attrs:{id:"_6-4-查看非同质化代币跨链转账结果"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-查看非同质化代币跨链转账结果"}},[e._v("#")]),e._v(" 6.4 查看非同质化代币跨链转账结果")]),e._v(" "),n("p",[e._v("在本地测试链上已经收到了id为ox51的 非同质化代币")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("cb-sol-cli erc721 owner \n\n--url  http://119.28.23.120:8545 \n--privateKey 64a69c87b3d15dc1f03715493XXXXXXXXXXXXXXXXXXXXXXX\n--erc721Address 0x6c55cBf613d47f57Aef71605B005Bf098680cf02  \n--id 0x50\n\n\n[erc721/owner] Owner of token 0x50 is 0xAFC312512B8787848D75490377b093B1F7CF3033\n")])])]),n("h2",{attrs:{id:"_7-原生跨链转账-非燃烧"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7-原生跨链转账-非燃烧"}},[e._v("#")]),e._v(" 7. 原生跨链转账（非燃烧）")]),e._v(" "),n("h3",{attrs:{id:"_7-1-进行wtie-erc20-跨链转账"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-进行wtie-erc20-跨链转账"}},[e._v("#")]),e._v(" 7.1 进行wtie（erc20）跨链转账")]),e._v(" "),n("p",[e._v("首先向本地链跨链发送1币")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('cb-sol-cli erc20 deposit \n--url https://data-seed-prebsc-2-s1.binance.org:8545  \n--privateKey 64a69c87b3d15dc1f037154XXXXXXXXXXXXXXXXXXXX  \n--amount 1  \n--dest 200   \n--bridge  0xa5B27BdCb8af3d062e63C02b31Ee9E8763e9636B  \n--recipient 0xAFC312512B8787848D75490377b093B1F7CF3033  \n--resourceId "0x000000000000000000000000000000c76ebe4a02bbc34786d860b355f5a5ce02" \n--gasPrice 10000000000\n\n[erc20/deposit] Constructed deposit:\n[erc20/deposit]   Resource Id: 0x000000000000000000000000000000c76ebe4a02bbc34786d860b355f5a5ce02\n[erc20/deposit]   Amount: 0x0de0b6b3a7640000\n[erc20/deposit]   len(recipient): 20\n[erc20/deposit]   Recipient: 0xAFC312512B8787848D75490377b093B1F7CF3033\n[erc20/deposit]   Raw: 0x0000000000000000000000000000000000000000000000000de0b6b3a76400000000000000000000000000000000000000000000000000000000000000000014AFC312512B8787848D75490377b093B1F7CF3033\n[erc20/deposit] Creating deposit to initiate transfer!\n')])])]),n("h3",{attrs:{id:"_7-2-查看是否保存到合约池子中"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-查看是否保存到合约池子中"}},[e._v("#")]),e._v(" 7.2 查看是否保存到合约池子中")]),e._v(" "),n("p",[e._v("查看代币已经保存在ERC20Hander合约的池子中")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("cb-sol-cli erc20 balance \n--url  https://data-seed-prebsc-2-s1.binance.org:8545 \n--privateKey 64a69c87b3d15dc1f03715XXXXXXXXXXXXXXXXXXXXXXXXXX\n--erc20Address  0x10D95320F84e96eDd3C69347Ebcf83a6B7fae0cb  \n--address 0xE52482077205e0205a9B25b6f043B812A5c81f0e \n--gasPrice 10000000000    \n[erc20/balance] Account 0xE52482077205e0205a9B25b6f043B812A5c81f0e has a balance of 1.0\n")])])]),n("h3",{attrs:{id:"_7-3-查看wtie跨到本地链的结果"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-查看wtie跨到本地链的结果"}},[e._v("#")]),e._v(" 7.3 查看wtie跨到本地链的结果")]),e._v(" "),n("p",[e._v("本地链已经接受到1个weth")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("cb-sol-cli erc20 balance \n--url  http://119.28.23.120:8545\n--privateKey 64a69c87b3d15dc1f0371549XXXXXXXXXXXXXXXXXXXXXX \n--erc20Address  0x10D95320F84e96eDd3C69347Ebcf83a6B7fae0cb \n--address 0xAFC312512B8787848D75490377b093B1F7CF3033 \n\n[erc20/balance] Account 0xAFC312512B8787848D75490377b093B1F7CF3033 has a balance of 1.0\n")])])]),n("h3",{attrs:{id:"_7-4-wtie转换成原生tie"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7-4-wtie转换成原生tie"}},[e._v("#")]),e._v(" 7.4 wtie转换成原生tie")]),e._v(" "),n("p",[e._v("调用转换合约由wtie转换成tie。")])])}),[],!1,null,null,null);a.default=r.exports}}]);